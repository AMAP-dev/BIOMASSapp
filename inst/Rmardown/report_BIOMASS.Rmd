---
author: "Arthur Pere"
date: '`r invisible( Sys.setlocale("LC_TIME", "C") ); format(Sys.Date(), "%B %d, %Y")`'
output:
  html_document:
    number_sections: yes
    theme: united
    toc: yes
    toc_depth: 5
    toc_float: yes
title: "Report BIOMASS"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, comment = NA, fig.align = "center")
library(knitr)
```



# Load data
```{r load data, message=FALSE}

# select the column we need
selectColumn = c(input$sel_PLOT, input$sel_DIAMETER,
                 input$sel_WD, input$sel_GENUS, input$sel_SPECIES, 
                 input$sel_H, input$sel_LONG, input$sel_LAT)
selectedColumn = selectColumn != "<unselected>"

data = setDT(inv()[, selectColumn[selectedColumn]])
setnames(data, names(data), c("plotId", "D",
                               "WD", "Genus", "Species",
                               "H", "longitude", "latitude")[selectedColumn])

kable(head(data), digits = 3, caption = "The head of the table")

```

You have selected `r ncol(data)` columns (renamed) and your data table have `r nrow(data)`.

```{r}
# boolean, T if we want to show
map_or_not = all(c("longitude", "latitude") %in% names(data)) || "chave" %in% input$chkgrp_HEIGHT || ("feld" %in% input$chkgrp_HEIGHT && input$sel_FELD == "<unselected>")
```



`r if (!(all(c("longitude", "latitude") %in% names(data)) || "chave" %in% input$chkgrp_HEIGHT || ("feld" %in% input$chkgrp_HEIGHT && input$sel_FELD == "<unselected>"))) {"<!--"}`
# Location of the plots
```{r localisation}

if (all(c("longitude", "latitude") %in% names(data)) || "chave" %in% input$chkgrp_HEIGHT || ("feld" %in% input$chkgrp_HEIGHT && input$sel_FELD == "<unselected>")) {
  
  
  
}
```
`r if (!(all(c("longitude", "latitude") %in% names(data)) || "chave" %in% input$chkgrp_HEIGHT || ("feld" %in% input$chkgrp_HEIGHT && input$sel_FELD == "<unselected>"))) {"-->"}`
